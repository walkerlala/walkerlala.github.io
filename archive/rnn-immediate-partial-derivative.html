<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!--http://walkerlala.com/-->
        <link rev="made" href="mailto:yubinr@qq.com">
        <link rel="icon" type="image/png" href="../site-icon.png">
        <link rel="stylesheet" type="text/css" href="../css/yubinr.css">
        <script src="../js/prettify.js"></script>
        <!-- <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.1.1.min.js"></script> -->
        <script src="../js/jquery-3.1.1.min.js"></script>
        <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
        <meta http-equiv="EXPIRES" content="0">
        <meta http-equiv="CONTENT-LANGUAGE" content="en-US">

        <meta name="AUTHOR" content="walkerlala">
        <title>Immediate Partial Derivative Proof</title>
    </head>

    <body data-feedly-mini="yes">
        <div id="wrapper">
            <div id="wrap">
                <div id="top">
                    <div class="top_nav">
                        <span class="tab0"><a href="../index.html">Home</a></span>
                        <span class="tab0 active"><a href="../blog.html">Blog</a></span>
                        <span class="tab0"><a href="../archive.html">Archive</a></span>
                        <span class="tab0"><a href="../about.html">About Me</a></span>
                        <span class="tab0"><a href="../download.html">Download</a></span>
                    </div>  <!--top_nav-->
                    <div class="logo">
                        <img align="left" class="logo_img" src="../img/lambda.png">
                        <span class="logo_text">
                            walkerlala
                        </span>
                    </div>
                </div>     <!--top-->

                <div id="main">
                    <br>
                    <div><!-- blog content start -->
                        <!-- see `https://github.com/google/code-prettify` for more detail
                            <?prettify lang=c linenums=true?>
                            <pre class="prettyprint">
                    int main()
                    {
                        printf("Hello world");
                        return 0;
                    }
                            </pre>
                            -->
                            <h1>Immediate partial derivative</h1>
                            <p>This is just a fancy name. No magic, if you have some knowledge of partial derivative. This name is proposed by <em>Razvan Pascanu et al.</em> in this <a href="https://arxiv.org/pdf/1211.5063v2.pdf">paper</a> to make thing easier to explain. I couldn’t find any formal definition and proof anywhere, so, with some help from my friend Haicheng Xu, I prove it, as follow:</p>
                            <p>What we want to prove is:</p>
                            <p><div style="display: flex; justify-content: center;"><img src="../img/tex-img/buo5T96pQiN463MJ.svg" alt=" {\partial\boldsymbol\varepsilon_t \over \partial\theta} = 
                            \sum_{1 \leq k \leq t}\big({\partial \boldsymbol\varepsilon_t \over \partial \boldsymbol x_t} {\partial \boldsymbol x_t \over \partial \boldsymbol x_k} {\partial^+\boldsymbol x_k \over \partial\theta} ) " /></div></p>
                            <p>That is in vector form. To simplify, we use scalar form, and the change the notation a little bit, to prove:</p>
                            <p><span style="float:right">(1)</span><div style="display: flex; justify-content: center;"><img src="../img/tex-img/2HrIV71CWExgqTPQ.svg" alt=" {\partial h_k(x) \over \partial x} = 
                            \sum_{1\leq i \leq k} \left ({\partial h_k(x) \over \partial h_i(x)} {\partial ^+ h_i(x) \over \partial x} \right ) " /></div></p>
                            <p>We would use mathematical induction to prove it.</p>
                            <p>Suppose:</p>
                            <p><span style="float:right">(2)</span><div style="display: flex; justify-content: center;"><img src="../img/tex-img/C1s2OVpgTo48k4Cu.svg" alt="   \[
                            \left\{
                            \begin{array}{ll}
                            h_{k+1}(x) = F(h_k(x), x)\\
                            h_{k}(x)   = F(h_{k-1}(x), x)\\
                            .\\
                            .\\
                            .\\
                            h_0(x)     = h_0(x)
                            \end{array}
                            \right.
                            \]
                            " /></div></p>
                            <p>Using the the mathematical induction method, we assume that</p>
                            <p><span style="float:right">(3)</span><div style="display: flex; justify-content: center;"><img src="../img/tex-img/b2Bxfmjvuu7Tu9dl.svg" alt=" {\partial h_k(x) \over \partial x} = {{\partial h_k(x) \over \partial h_k(x)} {\partial ^+ h_k(x) \over \partial x} + 
                            {\partial h_k(x) \over \partial h_{k-1}(x)} {\partial ^+ h_{k-1}(x) \over \partial x} + ... +
                            {\partial h_k(x) \over \partial h_0(x)} {\partial ^+ h_0(x) \over \partial x} } " /></div></p>
                            <p>For <img src="../img/tex-img/tp87pJsRielqVJ2L.svg" alt=" k = 1,2 " />, this is trivial to prove, and we leave that to the user.</p>
                            <p>For <img src="../img/tex-img/Ge6TF6MW2f8r3lYn.svg" alt=" k+1 " />, using the partial derivative principle, we obtain:</p>
                            <p><span style="float:right">(3)</span><div style="display: flex; justify-content: center;"><img src="../img/tex-img/luxXjGZROKzSPn23.svg" alt=" {\partial h_{k+1}(x) \over \partial x} \linebreak \linebreak
                            = {\partial F(h_k(x), x) \over \partial h_k(x)}{\partial h_k(x) \over \partial x} + \
                            {\partial F(h_k(x), x) \over \partial x} {\partial x \over \partial x}  \linebreak \linebreak
                            = {\partial h_{k+1}(x) \over \partial h_k(x)} {\partial h_k(x) \over \partial x} +
                            {\partial ^+ h_{k+1}(x) \over \partial x} {\partial h_{k+1}(x) \over \partial h_{k+1}(x)} \linebreak \linebreak
                            " /></div></p>
                            <p>Assuming that eq.2 is true, we replace <img src="../img/tex-img/TQ5H5bksfTgq0VNu.svg" alt=" {\partial h_k(x) \over \partial x} " /> in eq.3 with eq.2, and get:</p>
                            <p><span style="float:right">(4)</span><div style="display: flex; justify-content: center;"><img src="../img/tex-img/A1DKgc7buwPOB4zV.svg" alt=" {\partial h_{k+1}(x) \over \partial x}
={\partial h_{k+1}(x) \over \partial h_{k+1}(x)} {\partial ^+ h_{k+1}(x) \over \partial x} + {\partial h_{k+1}(x) \over \partial h_k(x)} {\partial ^+ h_k(x) \over \partial x} + ... +{\partial h_{k+1}(x) \over \partial h_0(x)} {\partial ^+ h_0(x) \over \partial x} }" /></div></p>
                            <p>which is of the same form of eq.1.</p>
                            <p>So, assume that eq.1 is true for <img src="../img/tex-img/yhVNPXQwGefve8VS.svg" alt=" k " />, we prove that it’s also true for <img src="../img/tex-img/Ge6TF6MW2f8r3lYn.svg" alt=" k+1 " />. For <img src="../img/tex-img/TF6GDhKk7wTKF62J.svg" alt=" k = 1 " />, it’s also true. Thus, by principle of mathematical induction, we prove that eq.1 hold for <img src="../img/tex-img/ULkblgYkc9xt9VTW.svg" alt=" k = 1,2,3... " />. <img src="../img/tex-img/jZS8FWc1sXdeIYkd.svg" alt="\blacksquare " /></p>

                            <h2>References</h2>
                            <ol>
                                <li>
                                    <p>Razvan Pascanu, Tomas Mikolov, Yoshua Bengio, <em>On the difficulty of training recurrent neural networks</em>, JMLR W&amp;CP 28 (3) : 1310–1318, 2013</p>
                                </li>
                            </ol>
                            <hr>
                            <p class="LastModified">Yubin Ruan, last modified in 2016-12-30</p>
                    </div>  <!-- end blog content -->

                    <!--  here should be some pictures for seperating -->
                    <div class="Comments" > <!-- start comments content -->
                        <h2 class="CommentsTitle">Comments</h2>
                        <p class="visit-this-page">Visit this <a href="https://github.com/walkerlala/walkerlala.github.io/issues/3">issue page</a> on Github to post a comment </p>

                        <script type="text/javascript">
$issuenum = "3"; 
                            $.ajax({
                                url: "https://api.github.com/repos/walkerlala/walkerlala.github.io/issues/" + $issuenum + "/comments"
                                    , method: "get"
                                    , headers: { Accept: "application/vnd.github.full+json" }
                                , dataType: 'json'
                                    , error: function(e){}
                                , success: function(resp){
                                    var cuser, cuserlink, clink, cbody, cavatarlink, cdate;
                                    for (var i=0; i<resp.length; i++) {
                                        cuser = resp[i].user.login;
                                        cuserlink = "https://github.com/" + resp[i].user.login;
                                        clink = "https://github.com/walkerlala/walkerlala.github.io/issues/" + $issuenum + "#issuecomment-" + resp[i].url.substring(resp[i].url.lastIndexOf("/")+1);
                                        cbody = resp[i].body_html;
                                        cavatarlink = resp[i].user.avatar_url;
                                        cdate = (new Date(resp[i].created_at)).toLocaleString();

                                        $(".Comments").append('<div class="comment"><div class="comment-header"><a class="comment-user" href="' + cuserlink + '"><img class="comment-gravatar" src="' + cavatarlink + '" alt="" width="20" height="20"> ' + cuser + '</a><a class="comment-date" href="' + clink + '">' + cdate + '</a></div><div class="comment-body">' + cbody + '</div></div>');
                                    }
                                }
                            });
                        </script>

                    </div> <!-- end comments content -->

                    <hr>

                    <div id="footer">
                        Copyright © 2015-2016 by Yubin Ruan
                        <br>
                    </div>

                </div> <!--main-->
                <p>  &nbsp;   </p>
            </div> <!--wrap-->
        </div> <!--wrapper-->
    </body>
</html>
